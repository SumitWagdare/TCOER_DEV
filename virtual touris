<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Tourist Guide & AI Art Studio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 
        ====================================================================
        === CRITICAL STEP: ADD YOUR GOOGLE MAPS API KEY HERE ===
        ====================================================================
        The map will NOT work without a valid API key.
        1. Go to the Google Cloud Console: https://console.cloud.google.com/
        2. Create a project.
        3. Enable the "Maps JavaScript API".
        4. Go to "APIs & Services" > "Credentials" and create an API key.
        5. Replace 'YOUR_API_KEY' in the line below with your new key.
        ====================================================================
    -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&onerror=gm_authFailure" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FFF8F0; }
        .font-playfair { font-family: 'Playfair Display', serif; }
        .hero-bg { background-image: url('https://images.unsplash.com/photo-1524492412937-b28074a5d7da?q=80&w=2071&auto=format&fit=crop'); background-size: cover; background-position: center; }
        .fade-in-section { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in-section.is-visible { opacity: 1; transform: translateY(0); }
        #map-container { position: relative; height: 600px; }
        #map { height: 100%; width: 100%; border-radius: 0.75rem; }
        #map-error-overlay { position: absolute; inset: 0; background-color: rgba(255, 255, 255, 0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 1rem; border-radius: 0.75rem; }
        .timeline-item { position: relative; padding-left: 2.5rem; padding-bottom: 2rem; border-left: 2px solid #f59e0b; }
        .timeline-item:last-child { border-left: 2px solid transparent; padding-bottom: 0; }
        .timeline-dot { position: absolute; left: -10px; top: 0; height: 20px; width: 20px; background-color: #d97706; border-radius: 50%; border: 3px solid #fffaf0; }
        .loader { border: 5px solid #f3f3f3; border-top: 5px solid #d97706; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .custom-form { background-color: #fffaf0; border-color: #fde68a; transition: all 0.3s ease; }
        .custom-form:focus { --tw-ring-color: #f59e0b; border-color: #f59e0b; }
        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        #virtual-guide { transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out; }
        .cuisine-bg { background-image: url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?q=80&w=1981&auto=format&fit=crop'); background-size: cover; background-position: center; }
        .quiz-option:hover { background-color: #fef3c7; }
        .quiz-option.selected { background-color: #fde68a; border-color: #f59e0b; }
        .quiz-option.correct { background-color: #dcfce7; border-color: #22c55e; }
        .quiz-option.incorrect { background-color: #fee2e2; border-color: #ef4444; }
    </style>
</head>
<body>
    <!-- =================================== -->
    <!-- ========= AUTH MODALS ============= -->
    <!-- =================================== -->
    <div id="auth-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50 hidden modal-overlay opacity-0">
        <div class="modal-content transform -translate-y-10 bg-white rounded-lg shadow-xl w-full max-w-md">
            <!-- Login/Signup Forms Here -->
             <div id="login-form-container">
                <form id="login-form" class="p-8"><h2 class="text-2xl font-bold text-amber-900 font-playfair mb-2">Welcome Back</h2><p class="text-gray-600 mb-6">Log in to access your saved places and routes.</p><div id="login-error" class="text-red-600 text-sm mb-4"></div><div class="space-y-4"><input type="email" id="login-email" class="w-full p-3 rounded border custom-form" placeholder="Email Address" required><input type="password" id="login-password" class="w-full p-3 rounded border custom-form" placeholder="Password" required></div><button type="submit" class="w-full mt-6 bg-amber-800 text-white py-3 rounded-lg font-semibold hover:bg-amber-900 transition">Log In</button><p class="text-center text-sm text-gray-600 mt-4">Don't have an account? <a href="#" id="show-signup" class="font-semibold text-amber-700 hover:underline">Sign Up</a></p></form>
            </div>
            <div id="signup-form-container" class="hidden">
                <form id="signup-form" class="p-8"><h2 class="text-2xl font-bold text-amber-900 font-playfair mb-2">Create an Account</h2><p class="text-gray-600 mb-6">Join to save your discoveries and plan your trips.</p><div id="signup-error" class="text-red-600 text-sm mb-4"></div><div class="space-y-4"><input type="email" id="signup-email" class="w-full p-3 rounded border custom-form" placeholder="Email Address" required><input type="password" id="signup-password" class="w-full p-3 rounded border custom-form" placeholder="Password (min. 6 characters)" required></div><button type="submit" class="w-full mt-6 bg-amber-800 text-white py-3 rounded-lg font-semibold hover:bg-amber-900 transition">Sign Up</button><p class="text-center text-sm text-gray-600 mt-4">Already have an account? <a href="#" id="show-login" class="font-semibold text-amber-700 hover:underline">Log In</a></p></form>
            </div>
        </div>
    </div>

    <!-- =================================== -->
    <!-- ===== CULTURAL HERITAGE PAGE ===== -->
    <!-- =================================== -->
    <div id="heritage-page">
        <!-- Header & Nav -->
        <header class="hero-bg h-screen flex flex-col relative">
            <nav class="absolute top-0 left-0 right-0 p-4 z-20 bg-gradient-to-b from-black/50 to-transparent">
                <div class="container mx-auto flex justify-between items-center">
                    <a href="#" class="text-white text-xl font-bold font-playfair">India Explored</a>
                    <div class="hidden md:flex items-center space-x-4 text-white text-sm">
                        <a href="#timeline-section" class="hover:text-amber-300 transition">Timeline</a>
                        <a href="#virtual-guide-section" class="hover:text-amber-300 transition">Guide</a>
                        <a href="#cuisine-section" class="hover:text-amber-300 transition">Cuisine</a>
                        <a href="#language-section" class="hover:text-amber-300 transition">Translate</a>
                        <a href="#quiz-section" class="hover:text-amber-300 transition">Quiz</a>
                        <a href="#ai-studio-section" class="hover:text-amber-300 transition">AI Studio</a>
                    </div>
                    <div id="auth-links" class="space-x-2">
                        <button id="login-btn" class="bg-white/20 text-white py-2 px-4 rounded-lg hover:bg-white/30 transition">Login</button>
                        <button id="signup-btn" class="bg-amber-600 text-white py-2 px-4 rounded-lg hover:bg-amber-700 transition">Sign Up</button>
                    </div>
                    <div id="user-info" class="hidden items-center space-x-4">
                        <a href="#" id="my-trip-btn" class="text-white font-semibold hover:text-amber-300 transition">My Trip (<span id="trip-count">0</span>)</a>
                        <span id="user-email" class="text-white hidden lg:inline"></span>
                        <button id="logout-btn" class="bg-white/20 text-white py-2 px-4 rounded-lg hover:bg-white/30 transition">Logout</button>
                    </div>
                </div>
            </nav>
            <div class="flex-grow flex items-center justify-center text-white text-center">
                <div class="relative z-10 p-4">
                    <h1 class="text-5xl md:text-7xl font-playfair font-bold">Incredible India</h1>
                    <p class="mt-4 text-lg md:text-xl max-w-2xl mx-auto">Discover a land of vibrant cultures, ancient traditions, and timeless heritage.</p>
                </div>
            </div>
            <div class="absolute inset-0 bg-black/60"></div>
        </header>

        <main class="bg-[#FFF8F0]">
            
            <!-- Historical Timeline Section -->
            <section id="timeline-section" class="py-16 md:py-24 fade-in-section">
                 <div class="container mx-auto px-4"><div class="text-center mb-12"><h2 class="text-4xl font-playfair font-bold text-amber-900">A Journey Through Time</h2><p class="mt-4 max-w-3xl mx-auto text-gray-700">Witness the milestones of a civilization that has shaped the world for millennia.</p></div><div class="max-w-3xl mx-auto"><div class="timeline-item"><div class="timeline-dot"></div><h3 class="font-bold text-xl text-amber-800">c. 2500 BCE: Indus Valley Civilization</h3><p class="text-gray-600 mt-1">One of the world's earliest urban civilizations, known for advanced city planning.</p></div><div class="timeline-item"><div class="timeline-dot"></div><h3 class="font-bold text-xl text-amber-800">c. 273-232 BCE: The Mauryan Empire</h3><p class="text-gray-600 mt-1">Under Emperor Ashoka, the empire unites most of the Indian subcontinent.</p></div><div class="timeline-item"><div class="timeline-dot"></div><h3 class="font-bold text-xl text-amber-800">c. 320-550 CE: The Gupta Empire</h3><p class="text-gray-600 mt-1">Known as the "Golden Age of India," a period of great scientific and cultural advancements.</p></div><div class="timeline-item"><div class="timeline-dot"></div><h3 class="font-bold text-xl text-amber-800">1947 CE: Independence</h3><p class="text-gray-600 mt-1">India achieves independence, marking the birth of the world's largest democracy.</p></div></div></div>
            </section>
            
            <!-- Virtual Guide Section -->
            <section id="virtual-guide-section" class="py-16 md:py-20 bg-amber-100/50 border-y border-amber-200/80 fade-in-section">
                <div class="container mx-auto px-4"><div class="text-center mb-12"><svg class="w-16 h-16 text-amber-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 6.75V15m6-6v8.25m.5-11.5-1.5 1.5m1.5-1.5-1.5-1.5M12 3v18m-4.5-15-1.5 1.5m1.5-1.5-1.5-1.5m9 15-1.5-1.5m1.5 1.5 1.5-1.5M5.25 9v1.5m13.5-1.5v1.5m-6.75 3.75h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5M9 12.75h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5m6 3.75h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5m-1.5-1.5h1.5" /></svg><h2 class="text-4xl font-playfair font-bold text-amber-900 mt-4">Become Your Own Tour Guide</h2><p class="mt-4 max-w-3xl mx-auto text-gray-700">Plan routes, discover hidden gems, and get historical insights from our virtual AI guide.</p></div><div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8 items-start"><div class="lg:col-span-1 bg-white/80 backdrop-blur-sm p-6 rounded-lg shadow-lg"><h3 class="text-2xl font-bold text-amber-900 font-playfair">Plan Your Trip</h3><div class="mt-4 space-y-4"><div><label for="start-location-guide" class="block text-sm font-medium text-gray-700">Start</label><input type="text" id="start-location-guide" class="custom-form mt-1 block w-full rounded-md border-2 shadow-sm p-2" placeholder="e.g., Delhi"></div><div><label for="end-location-guide" class="block text-sm font-medium text-gray-700">Destination</label><input type="text" id="end-location-guide" class="custom-form mt-1 block w-full rounded-md border-2 shadow-sm p-2" placeholder="e.g., Agra"></div><div><button id="get-directions-btn-guide" class="w-full bg-amber-800 text-white py-2 px-4 rounded-lg font-semibold hover:bg-amber-900 transition">Get Directions</button></div></div></div><div id="map-container" class="lg:col-span-2 shadow-lg rounded-lg"><div id="map"></div><div id="map-error-overlay" class="hidden"><svg class="w-16 h-16 text-red-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.007H12v-.007z" /></svg><h3 class="text-2xl font-bold text-red-600">Map Error: Invalid API Key</h3><p class="mt-2 text-gray-700">Please provide a valid API key.</p><a href="https://console.cloud.google.com/" target="_blank" class="mt-6 inline-block bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors">Get API Key</a></div></div></div></div>
            </section>

            <!-- Cuisine Explorer Section -->
            <section id="cuisine-section" class="py-16 md:py-24 fade-in-section">
                <div class="container mx-auto px-4"><div class="cuisine-bg rounded-2xl shadow-2xl p-8 md:p-16 relative overflow-hidden"><div class="absolute inset-0 bg-black/60 rounded-2xl"></div><div class="relative z-10 text-center text-white"><svg class="w-16 h-16 text-amber-300 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 8.25v.75a2.25 2.25 0 0 1-2.25 2.25H4.5a2.25 2.25 0 0 1-2.25-2.25v-.75m19.5 0a2.25 2.25 0 0 0-2.25-2.25H4.5a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.25a2.25 2.25 0 0 1-2.25 2.25H4.5a2.25 2.25 0 0 1-2.25-2.25v-.25m15 5.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z M12.75 15.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z M8.25 15.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" /></svg><h2 class="text-4xl font-playfair font-bold mt-4">AI Cuisine Explorer</h2><p class="mt-4 max-w-2xl mx-auto text-amber-50">Discover India's culinary treasures. Ask our AI for recommendations!</p><div class="mt-8 max-w-xl mx-auto flex items-center bg-white rounded-full shadow-lg p-2"><input type="text" id="cuisine-prompt" class="w-full bg-transparent p-2 text-gray-800 placeholder-gray-500 focus:outline-none" placeholder="e.g., 'Famous dishes from Kerala'"><button id="cuisine-btn" class="bg-amber-800 text-white rounded-full p-3 hover:bg-amber-900 transition"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg></button></div><div id="cuisine-results" class="mt-8 text-left text-white/90"></div></div></div></div>
            </section>

            <!-- NEW: AI Language Assistant Section -->
            <section id="language-section" class="py-16 md:py-20 bg-amber-100/50 border-y border-amber-200/80 fade-in-section">
                <div class="container mx-auto px-4 text-center">
                    <svg class="w-16 h-16 text-amber-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802" /></svg>
                    <h2 class="text-4xl font-playfair font-bold text-amber-900 mt-4">AI Language Assistant</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-gray-700">Translate phrases for your travels. Break down language barriers instantly.</p>
                    <div class="mt-8 max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg">
                        <textarea id="translate-input" class="w-full p-3 rounded border custom-form" rows="3" placeholder="Enter text to translate..."></textarea>
                        <div class="mt-4 flex items-center justify-between gap-4">
                            <select id="translate-to" class="w-full custom-form rounded-md p-3 border-2"><option value="hi">Hindi</option><option value="bn">Bengali</option><option value="ta">Tamil</option><option value="te">Telugu</option></select>
                            <button id="translate-btn" class="bg-amber-800 text-white font-semibold py-3 px-6 rounded-lg hover:bg-amber-900 transition">Translate</button>
                        </div>
                        <div id="translate-output" class="mt-4 p-4 bg-amber-50 rounded-lg text-left text-gray-800 h-24 border border-amber-200"></div>
                    </div>
                </div>
            </section>
            
             <!-- NEW: Cultural Challenge Quiz Section -->
            <section id="quiz-section" class="py-16 md:py-24 fade-in-section">
                <div class="container mx-auto px-4 text-center">
                    <svg class="w-16 h-16 text-amber-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
                    <h2 class="text-4xl font-playfair font-bold text-amber-900 mt-4">Cultural Challenge Quiz</h2>
                    <p class="mt-4 max-w-2xl mx-auto text-gray-700">Test your knowledge with our AI Quizmaster!</p>
                    <div id="quiz-container" class="mt-8 max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg text-left">
                        <p id="quiz-question" class="text-lg font-semibold text-gray-900">What is the classical dance form of Kerala?</p>
                        <div id="quiz-options" class="mt-4 space-y-3">
                            <div class="quiz-option border-2 border-gray-200 p-3 rounded-lg cursor-pointer transition" data-option="A">A) Bharatanatyam</div>
                            <div class="quiz-option border-2 border-gray-200 p-3 rounded-lg cursor-pointer transition" data-option="B">B) Kathakali</div>
                            <div class="quiz-option border-2 border-gray-200 p-3 rounded-lg cursor-pointer transition" data-option="C">C) Odissi</div>
                        </div>
                        <button id="quiz-submit" class="w-full mt-6 bg-gray-700 text-white font-semibold py-3 rounded-lg hover:bg-gray-800 transition disabled:bg-gray-400" disabled>Submit Answer</button>
                        <div id="quiz-feedback" class="mt-4 text-center font-semibold"></div>
                    </div>
                </div>
            </section>
            
            <!-- AI Art Studio Section -->
            <section id="ai-studio-section" class="py-16 md:py-24 fade-in-section">
                 <div class="container mx-auto px-4"><div class="text-center mb-12"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.572L16.25 22.5l-.648-1.928a2.25 2.25 0 01-1.44-1.442L12 18.75l1.928-.648a2.25 2.25 0 011.44 1.442z" /></svg><h2 class="text-4xl font-playfair font-bold text-amber-900 mt-4">Create with AI</h2><p class="mt-4 max-w-3xl mx-auto text-gray-700">Use generative AI to create beautiful artwork inspired by traditional Indian styles.</p></div><div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl border border-gray-200/80 p-8 md:p-12 grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 items-center mx-auto"><div class="flex flex-col h-full"><div class="flex-grow space-y-6"><div><div class="flex justify-between items-center"><label for="prompt" class="flex items-center text-lg font-semibold text-amber-800"><span class="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold mr-3">1</span>Describe Vision</label><button id="surprise-btn" class="text-sm font-semibold text-amber-700 hover:text-amber-900 transition">Surprise Me ✨</button></div><textarea id="prompt" rows="3" class="custom-form mt-2 block w-full rounded-md border-2 shadow-sm focus:ring-2 p-3" placeholder="e.g., A peacock dancing in the rain..."></textarea><p id="prompt-error" class="text-red-600 text-sm mt-1 h-4"></p></div><div><label for="style" class="flex items-center text-lg font-semibold text-amber-800"><span class="flex items-center justify-center w-8 h-8 rounded-full bg-amber-100 text-amber-800 font-bold mr-3">2</span>Choose Style</label><select id="style" class="custom-form mt-2 block w-full rounded-md border-2 shadow-sm focus:ring-2 p-3"><option value="madhubani">Madhubani</option><option value="kalamkari">Kalamkari</option><option value="warli">Warli</option><option value="pattachitra">Pattachitra</option><option value="gond">Gond</option><option value="miniature">Miniature Painting</option></select></div></div><button id="generate-btn" class="w-full bg-gradient-to-r from-amber-700 to-amber-900 text-white font-bold py-3 px-4 rounded-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 transform text-lg shadow-lg mt-8">Generate Art</button></div><div id="image-container" class="w-full h-80 lg:h-full bg-amber-50 rounded-lg flex items-center justify-center border-2 border-amber-200/80 relative overflow-hidden shadow-inner p-2"><div id="loader" class="loader hidden"></div><img id="generated-image" src="" alt="AI generated art" class="hidden w-full h-full object-contain rounded-md transition-opacity duration-500"><div id="placeholder-text" class="text-amber-700 text-center p-4"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-amber-400/80" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" /></svg><p class="mt-4 font-semibold text-lg">Art appears here</p><p class="text-sm text-amber-600">Let your imagination flow</p></div><p id="error-message" class="hidden text-red-600 font-medium p-4 text-center"></p><button id="save-art-btn" class="absolute bottom-4 right-4 bg-white/80 text-amber-900 font-semibold py-2 px-4 rounded-lg shadow-lg backdrop-blur-sm hover:bg-white transition hidden">Save to Gallery</button></div></div></div>
            </section>
        </main>
    </div>
    
    <!-- Virtual Guide Character -->
    <div id="virtual-guide" class="fixed bottom-5 right-5 w-56 bg-amber-200 rounded-2xl p-4 flex items-center space-x-3 border-4 border-amber-800 shadow-2xl opacity-0 transform translate-y-full z-30">
        <svg class="w-16 h-16 text-amber-900 flex-shrink-0" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        <div id="guide-text" class="text-sm font-semibold text-amber-900">Hello! Click a spot to learn more.</div>
    </div>
    <audio id="guide-audio" class="hidden"></audio>


    <!-- Firebase SDKs -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
      
      const firebaseConfig = {
        apiKey: "YOUR_FIREBASE_API_KEY", authDomain: "YOUR_AUTH_DOMAIN", projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET", messagingSenderId: "YOUR_MESSAGING_SENDER_ID", appId: "YOUR_APP_ID"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      
      let currentUser = null;

      // --- Auth UI & State Management ---
      const authModal = document.getElementById('auth-modal');
      const authLinks = document.getElementById('auth-links');
      const userInfo = document.getElementById('user-info');
      const userEmailSpan = document.getElementById('user-email');
      
      const showModal = (isLogin) => { /* Modal logic here */ };
      const hideModal = () => { /* Modal logic here */ };

      document.getElementById('login-btn').addEventListener('click', () => showModal(true));
      document.getElementById('signup-btn').addEventListener('click', () => showModal(false));
      
      onAuthStateChanged(auth, user => {
          currentUser = user;
          if (user) {
              authLinks.classList.add('hidden');
              userInfo.classList.remove('hidden');
              userEmailSpan.textContent = user.email;
              hideModal();
          } else {
              authLinks.classList.remove('hidden');
              userInfo.classList.add('hidden');
              userEmailSpan.textContent = '';
          }
      });
      
      // Signup/Login/Logout event listeners here...

      // --- Virtual Guide, Narration, and Itinerary ---
      const virtualGuide = document.getElementById('virtual-guide');
      const guideText = document.getElementById('guide-text');
      const tripCountSpan = document.getElementById('trip-count');
      let tripItems = [];

      const showGuide = async (location) => {
        // Existing narration logic...
      };
      const hideGuide = () => { /* Existing hide logic */ };

      // --- AI Art Studio & Gallery Logic ---
      const saveArtBtn = document.getElementById('save-art-btn');
      const generateBtn = document.getElementById('generate-btn');

      generateBtn.addEventListener('click', async () => {
          // Existing generation logic...
          try {
              // On success:
              saveArtBtn.classList.remove('hidden');
          }catch(e){} 
      });
      
      saveArtBtn.addEventListener('click', () => {
          if (!currentUser) {
              alert("Please log in to save your artwork.");
              showModal(true);
              return;
          }
          saveArtBtn.textContent = 'Saved!';
          console.log('Artwork saved for user:', currentUser.uid);
          setTimeout(() => { 
              saveArtBtn.textContent = 'Save to Gallery';
              saveArtBtn.classList.add('hidden');
          }, 2000);
      });

      // --- AI Cuisine Explorer Logic ---
      const cuisineBtn = document.getElementById('cuisine-btn');
      const cuisinePrompt = document.getElementById('cuisine-prompt');
      const cuisineResults = document.getElementById('cuisine-results');

      cuisineBtn.addEventListener('click', () => {
          const prompt = cuisinePrompt.value.trim();
          if (!prompt) return;

          cuisineResults.innerHTML = `<div class="flex items-center justify-center space-x-2 mt-4"><div class="loader !w-8 !h-8"></div><p>Our AI chef is thinking...</p></div>`;
          
          setTimeout(() => {
              cuisineResults.innerHTML = `
                <div class="bg-black/30 backdrop-blur-sm rounded-lg p-6">
                    <h3 class="text-2xl font-playfair font-bold text-amber-200">Recommendations for ${prompt}</h3>
                    <ul class="mt-4 space-y-3 list-disc list-inside">
                        <li><strong class="font-semibold text-white">Butter Chicken:</strong> A rich and creamy curry.</li>
                        <li><strong class="font-semibold text-white">Chole Bhature:</strong> Fluffy fried bread with chickpea curry.</li>
                    </ul>
                </div>`;
          }, 2000);
      });

      // --- NEW: Language Assistant Logic ---
      const translateBtn = document.getElementById('translate-btn');
      const translateInput = document.getElementById('translate-input');
      const translateOutput = document.getElementById('translate-output');

      translateBtn.addEventListener('click', () => {
          const text = translateInput.value.trim();
          if (!text) return;
          translateOutput.textContent = 'Translating...';
          // Placeholder for actual API call
          setTimeout(() => {
              translateOutput.textContent = `"${text}" is "नमस्ते" in Hindi.`;
          }, 1500);
      });
      
      // --- NEW: Cultural Quiz Logic ---
      const quizOptions = document.getElementById('quiz-options');
      const quizSubmitBtn = document.getElementById('quiz-submit');
      const quizFeedback = document.getElementById('quiz-feedback');
      const correctAnswer = 'B';
      let selectedOption = null;

      quizOptions.addEventListener('click', (e) => {
          if (e.target.classList.contains('quiz-option')) {
              quizOptions.querySelectorAll('.quiz-option').forEach(el => el.classList.remove('selected'));
              e.target.classList.add('selected');
              selectedOption = e.target.dataset.option;
              quizSubmitBtn.disabled = false;
          }
      });

      quizSubmitBtn.addEventListener('click', () => {
          if (!selectedOption) return;
          const selectedEl = quizOptions.querySelector(`[data-option="${selectedOption}"]`);
          const correctEl = quizOptions.querySelector(`[data-option="${correctAnswer}"]`);
          
          if (selectedOption === correctAnswer) {
              selectedEl.classList.add('correct');
              quizFeedback.textContent = 'Correct! Kathakali is a vibrant and dramatic art form.';
              quizFeedback.className = 'mt-4 text-center font-semibold text-green-600';
          } else {
              selectedEl.classList.add('incorrect');
              correctEl.classList.add('correct');
              quizFeedback.textContent = 'Not quite! The correct answer is Kathakali.';
               quizFeedback.className = 'mt-4 text-center font-semibold text-red-600';
          }
           quizSubmitBtn.disabled = true;
           // Placeholder to load a new question
      });


      // --- Google Maps Logic ---
      window.gm_authFailure = function() {
          document.getElementById('map-error-overlay').classList.remove('hidden');
      };
      
      window.initMap = function() {
          const map = new google.maps.Map(document.getElementById("map"), { zoom: 5, center: { lat: 20.5937, lng: 78.9629 } });
          const locations = [
            { position: { lat: 28.6129, lng: 77.2295 }, title: "Sunder Nursery, Delhi", info: "A restored 16th-century heritage park..." },
            { position: { lat: 18.9220, lng: 72.8347 }, title: "Warli Art Region, Maharashtra", info: "This region is the home of the indigenous Warli tribe..." },
            { position: { lat: 27.1751, lng: 78.0421 }, title: "Taj Mahal, Agra", info: "An ivory-white marble mausoleum..." }
          ];
          const infowindow = new google.maps.InfoWindow();

          locations.forEach(loc => {
              const marker = new google.maps.Marker({ position: loc.position, map: map, title: loc.title });
              marker.addListener('click', () => {
                  const saveButtonHtml = `<button onclick="window.addLocationToTrip('${loc.title}')" class="mt-2 bg-amber-700 text-white text-xs font-bold py-1 px-3 rounded-full hover:bg-amber-800 transition">Save to Trip</button>`;
                  infowindow.setContent(`<div class="p-2 font-sans"><h3 class="font-bold text-amber-800">${loc.title}</h3><p>${loc.info}</p>${saveButtonHtml}</div>`);
                  infowindow.open(map, marker);
                  showGuide(loc); 
              });
          });
          map.addListener('click', hideGuide);
      };

      window.addLocationToTrip = (title) => {
          if (!currentUser) {
              alert("Please log in to save locations to your trip.");
              showModal(true);
              return;
          }
          if (!tripItems.includes(title)) {
              tripItems.push(title);
              tripCountSpan.textContent = tripItems.length;
              console.log("Trip Itinerary:", tripItems);
          } else {
              alert(`${title} is already in your trip.`);
          }
      };

      // --- Fade In On Scroll ---
        const faders = document.querySelectorAll('.fade-in-section');
        const appearOptions = { threshold: 0.1, rootMargin: "0px 0px -50px 0px" };
        const appearOnScroll = new IntersectionObserver(function(entries, observer) {
            entries.forEach(entry => {
                if (!entry.isIntersecting) return;
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            });
        }, appearOptions);
        faders.forEach(fader => appearOnScroll.observe(fader));
    </script>
</body>
</html>

